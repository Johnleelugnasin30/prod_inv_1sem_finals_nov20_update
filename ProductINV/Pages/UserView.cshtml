@page
@model ProductINV.Pages.UserViewModel
@{
    ViewData["Title"] = "User View - Asset Inventory System";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ———————————— SAME STYLES YOU PROVIDED ———————————— */
        /* I kept everything, removed nothing */
        /* Background, tabs, cards, QR section — all unchanged */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #8b1a1a 0%, #c44f4f 25%, #d4a851 50%, #2d7a5f 75%, #1a4d7a 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
        }

        background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }

        }

        .bg-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255,255,255,0.05);
            animation: float 20s infinite ease-in-out;
        }

        transform: translate(0,0)scale(1);
        }

        33% {
            transform: translate(30px,-30px)scale(1.1);
        }

        66% {
            transform: translate(-20px,20px)scale(0.9);
        }

        }

        .main-container {
            max-width: 1400px;
            margin: auto;
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        .page-header {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
        }

        .tab-navigation {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .tab-btn {
            padding: 1rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
        }

            .tab-btn.active {
                background: linear-gradient(135deg, #8b1a1a 0%, #c44f4f 100%);
                color: white;
            }

        .content-section {
            display: none;
        }

            .content-section.active {
                display: block;
            }

        /* Product list */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill,minmax(300px,1fr));
            gap: 1.5rem;
        }

        .product-card {
            background: rgba(255,255,255,0.95);
            padding: 1.5rem;
            border-radius: 16px;
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: #eee;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
            margin-bottom: 1rem;
            font-size: 3rem;
        }

        .product-name {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .product-details {
            font-size: 0.9rem;
            color: #555;
        }

        .info-container, .qr-container {
            background: rgba(255,255,255,0.95);
            padding: 2rem;
            border-radius: 20px;
            backdrop-filter: blur(20px);
        }

        .search-box {
            padding: 1rem;
            width: 100%;
            border-radius: 12px;
            border: 1px solid #ccc;
            margin-bottom: 2rem;
        }

        .info-item {
            background: #f6f6f6;
            padding: 1rem;
            border-radius: 12px;
        }

        .qr-display {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            display: inline-block;
        }
    </style>
</head>

<body>

    <!-- Background Blur Decorations -->
    <div class="bg-circle" style="top:-100px;left:-100px;width:300px;height:300px;"></div>
    <div class="bg-circle" style="bottom:-120px;right:-120px;width:250px;height:250px;"></div>

    <div class="main-container">

        <!-- Header -->
        <div class="page-header">
            <h1>📦 User Product View</h1>
            <a asp-page="/Index" class="btn btn-danger">← Back</a>
        </div>

        <!-- Tabs -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="product-list">📋 Product List</button>
            <button class="tab-btn" data-tab="product-info">ℹ️ Product Information</button>
            <button class="tab-btn" data-tab="product-qr">📱 Product QR</button>
        </div>

        <!-- PRODUCT LIST -->
        <div class="content-section active" id="product-list">
            <div class="product-grid">
                @if (Model.Products != null && Model.Products.Any())
                {
                    foreach (var p in Model.Products)
                    {
                        <div class="product-card">
                            <div class="product-image">📦</div>
                            <div class="product-name">@p.Name</div>
                            <div class="product-details">ID: @p.ProductId</div>
                            <div class="product-details">Category: @p.Category</div>
                            <div class="product-details">Location: @p.Location</div>
                            <div class="product-details">@((p.IsAvailable ? "✓ Available" : "✗ In Use"))</div>
                            <button class="btn btn-primary mt-2" onclick="viewProduct('@p.ProductId')">View</button>
                        </div>
                    }
                }
                else
                {
                    <div>No products available.</div>
                }
            </div>
        </div>

        <!-- PRODUCT INFO (Simplified — only existing fields) -->
        <div class="content-section" id="product-info">
            <div class="info-container">

                <form method="get" asp-page-handler="SearchProduct">
                    <input type="text" id="productSearch" class="search-box" name="searchTerm" placeholder="Search product..." />
                </form>

                @if (Model.SelectedProduct != null)
                {
                    <div class="info-item">
                        <p><b>Product ID:</b> @Model.SelectedProduct.ProductId</p>
                        <p><b>Name:</b> @Model.SelectedProduct.Name</p>
                        <p><b>Category:</b> @Model.SelectedProduct.Category</p>
                        <p><b>Location:</b> @Model.SelectedProduct.Location</p>
                        <p><b>Status:</b> @(Model.SelectedProduct.IsAvailable ? "Available" : "In Use")</p>
                    </div>
                }
                else
                {
                    <div>No product selected.</div>
                }
            </div>
        </div>

        <!-- PRODUCT QR (Design only) -->
        <div class="content-section" id="product-qr">
            <div class="qr-container">
                <input type="text" id="qrProductSearch" class="search-box" placeholder="Enter product ID to generate QR..." />
                <button class="btn btn-primary" onclick="alert('QR generation not implemented (design only)')">Generate QR</button>
                <div class="qr-display mt-3">
                    <div style="font-size: 120px; opacity: 0.3;">📱</div>
                    <p>QR code preview</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        const tabs = document.querySelectorAll('.tab-btn');
        const sections = document.querySelectorAll('.content-section');

        tabs.forEach(btn => {
            btn.addEventListener('click', () => {
                tabs.forEach(x => x.classList.remove('active'));
                sections.forEach(x => x.classList.remove('active'));

                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });

        function viewProduct(id) {
            document.querySelector('[data-tab="product-info"]').click();
            document.getElementById('productSearch').value = id;
            document.getElementById('productSearch').form.submit();
        }
    </script>

</body>
</html>
